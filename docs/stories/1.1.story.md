# Story 1.1: 이메일/비밀번호 회원가입

## Status
Draft

## Story
**As a** 신규 사용자,
**I want** 이메일과 비밀번호로 회원가입할 수 있도록,
**so that** AI 메모장 서비스를 이용할 수 있다

## Acceptance Criteria
1. 사용자가 이메일과 비밀번호를 입력할 수 있는 회원가입 폼을 제공한다
2. 이메일 형식 유효성 검사를 실시한다
3. 비밀번호는 최소 8자 이상이어야 한다
4. 중복된 이메일로는 가입할 수 없다
5. 회원가입 성공 시 확인 메시지를 표시한다
6. 회원가입 실패 시 적절한 에러 메시지를 표시한다
7. 회원가입 완료 후 자동으로 로그인 상태로 전환된다

## Tasks / Subtasks
- [ ] Task 1: Supabase Auth 설정 및 환경 구성 (AC: 1, 2, 3, 4)
  - [ ] Supabase 프로젝트 설정 확인
  - [ ] 환경 변수 설정 (.env.local)
  - [ ] Supabase 클라이언트 초기화
- [ ] Task 2: 회원가입 UI 컴포넌트 구현 (AC: 1, 5, 6)
  - [ ] 회원가입 페이지 생성 (/auth/signup)
  - [ ] 이메일/비밀번호 입력 폼 구현
  - [ ] 유효성 검사 UI 피드백
  - [ ] 로딩 상태 및 에러 메시지 표시
- [ ] Task 3: 회원가입 로직 구현 (AC: 2, 3, 4, 7)
  - [ ] 이메일 형식 유효성 검사
  - [ ] 비밀번호 길이 검증
  - [ ] Supabase Auth signUp 함수 호출
  - [ ] 중복 이메일 에러 핸들링
  - [ ] 성공 시 자동 로그인 처리
- [ ] Task 4: 라우팅 및 네비게이션 설정 (AC: 7)
  - [ ] 회원가입 완료 후 리다이렉트 로직
  - [ ] 인증 상태에 따른 페이지 접근 제어
- [ ] Task 5: 테스트 작성
  - [ ] 회원가입 폼 유효성 검사 테스트
  - [ ] Supabase Auth 통합 테스트
  - [ ] 에러 케이스 테스트

## Dev Notes

### Previous Story Insights
첫 번째 스토리이므로 이전 스토리 인사이트 없음

### Data Models
- **User Authentication**: Supabase Auth를 통한 사용자 관리
- **User Profile**: 기본 사용자 정보 (이메일, 생성일시 등)
- **Session Management**: Supabase Auth 세션 자동 관리

### API Specifications
- **Supabase Auth API**:
  - `signUp(email, password)`: 회원가입 처리
  - `signInWithPassword(email, password)`: 로그인 처리
  - `getUser()`: 현재 사용자 정보 조회
  - `onAuthStateChange()`: 인증 상태 변경 감지

### Component Specifications
- **SignUpForm Component**:
  - Props: onSubmit callback
  - State: email, password, loading, error
  - Validation: 이메일 형식, 비밀번호 길이
- **Input Components**: shadcn/ui 기반
- **Button Components**: 로딩 상태 지원

### File Locations
- `/app/auth/signup/page.tsx`: 회원가입 페이지
- `/components/auth/signup-form.tsx`: 회원가입 폼 컴포넌트
- `/lib/supabase/client.ts`: Supabase 클라이언트 설정
- `/lib/supabase/server.ts`: 서버 사이드 Supabase 설정

### Testing Requirements
- **Unit Tests**: `/__tests__/` 디렉토리에 테스트 파일 생성
- **Testing Framework**: Jest + React Testing Library
- **Test Coverage**: 폼 유효성 검사, API 호출, 에러 핸들링
- **Integration Tests**: Supabase Auth 플로우 테스트

### Technical Constraints
- **Next.js App Router**: `/app` 디렉토리 구조 사용
- **Server Actions**: 서버 사이드 로직 구현
- **Tailwind CSS**: 스타일링 전용
- **shadcn/ui**: UI 컴포넌트 라이브러리
- **TypeScript**: 타입 안전성 보장

### Security Considerations
- **Client-side**: Supabase Auth 클라이언트 사용
- **Server-side**: 환경 변수를 통한 키 관리
- **Validation**: 클라이언트 및 서버 양쪽에서 유효성 검사
- **RLS**: Row Level Security 정책 적용 (향후 구현)

## Testing
### Testing Standards
- **Test File Location**: `/__tests__/` 디렉토리
- **Test Framework**: Jest + React Testing Library
- **Test Patterns**: 
  - Unit tests for form validation
  - Integration tests for Supabase Auth
  - Error handling tests
- **Coverage Requirements**: 핵심 기능 80% 이상 커버리지

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-01-XX | 1.0 | 초기 스토리 생성 | Scrum Master |

## Dev Agent Record
*이 섹션은 개발 에이전트가 구현 중에 작성합니다*

### Agent Model Used
*구현 시 기록*

### Debug Log References
*구현 시 기록*

### Completion Notes List
*구현 시 기록*

### File List
*구현 시 기록*

## QA Results
*QA 에이전트가 검토 후 작성*
